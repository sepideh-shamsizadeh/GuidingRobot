import csv
import re
import math
import matplotlib.pyplot as plt
import numpy as np

# Open the CSV file
with open('calib/scan_rear.csv', newline='') as csvfile:
    # Read the CSV data into a list of rows
    reader = csv.reader(csvfile)

    # Skip the header row
    next(reader)

    # Iterate over each row and plot the laser scan data
    for row in reader:
        # Extract the range measurements from the 'ranges' column
        ranges = [0.20499999821186066, 0.2160000056028366, 0.19099999964237213, 0.18799999356269836, 0.18400000035762787, 0.2150000035762787, 0.20800000429153442, 0.2160000056028366, 0.20100000500679016, 0.1860000044107437, 0.19200000166893005, 0.20800000429153442, 0.20100000500679016, 0.1860000044107437, 0.19300000369548798, 0.21899999678134918, 0.23399999737739563, 2.871999979019165, 2.8610000610351562, 2.8559999465942383, 2.867000102996826, 2.859999895095825, 2.868000030517578, 2.871999979019165, 2.869999885559082, 2.878999948501587, 2.88700008392334, 2.9030001163482666, 2.8910000324249268, 2.9030001163482666, 2.9170000553131104, 2.9159998893737793, 2.927999973297119, 2.9070000648498535, 2.5460000038146973, 2.510999917984009, 2.5350000858306885, 2.5269999504089355, 2.553999900817871, 2.561000108718872, 2.569000005722046, 2.6080000400543213, 2.9260001182556152, 3.0320000648498535, 3.055000066757202, 3.0510001182556152, 3.0789999961853027, 3.0820000171661377, 3.000999927520752, 2.8420000076293945, 2.9189999103546143, 3.121999979019165, 3.1429998874664307, 3.1600000858306885, 3.0309998989105225, 2.993000030517578, 2.75, 2.568000078201294, 1.5859999656677246, 1.4539999961853027, 1.475000023841858, 1.4620000123977661, 1.475000023841858, 1.4839999675750732, 1.4900000095367432, 1.5, 1.503000020980835, 1.5149999856948853, 1.5329999923706055, 1.5670000314712524, 1.7209999561309814, 2.0230000019073486, 1.5410000085830688, 1.4880000352859497, 1.5019999742507935, 1.4930000305175781, 1.5089999437332153, 1.50600004196167, 1.5410000085830688, 1.5219999551773071, 1.5470000505447388, 1.569000005722046, 1.5800000429153442, 1.7050000429153442, 2.566999912261963, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 3.5420000553131104, 3.367000102996826, 3.378999948501587, 3.7060000896453857, 3.556999921798706, 3.7160000801086426, 3.9649999141693115, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 4.499000072479248, 0.003000000026077032, 0.003000000026077032, 1.4559999704360962, 1.437999963760376, 1.4559999704360962, 0.003000000026077032, 0.0, 1.5299999713897705, 1.503999948501587, 1.5420000553131104, 4.598999977111816, 4.486000061035156, 4.7179999351501465, 5.355000019073486, 5.39900016784668, 0.003000000026077032, 5.513999938964844, 5.506999969482422, 5.741000175476074, 5.855000019073486, 5.934000015258789, 5.941999912261963, 5.861999988555908, 5.827000141143799, 5.790999889373779, 5.920000076293945, 0.003000000026077032, 0.0, 0.003000000026077032, 0.003000000026077032, 7.144000053405762, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 4.281000137329102, 4.289999961853027, 8.366000175476074, 8.555000305175781, 8.711999893188477, 8.876999855041504, 9.097000122070312, 8.791000366210938, 8.54699993133545, 8.562000274658203, 5.392000198364258, 5.406000137329102, 5.3460001945495605, 5.427000045776367, 11.880000114440918, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 0.003000000026077032, 6.7870001792907715, 6.789000034332275, 6.752999782562256, 3.2890000343322754, 0.003000000026077032, 7.124000072479248, 11.416000366210938, 11.291000366210938, 11.380999565124512, 11.282999992370605, 0.9110000133514404, 0.9079999923706055, 0.8980000019073486, 0.890999972820282, 0.9100000262260437, 0.9240000247955322, 0.9480000138282776, 5.2179999351501465, 4.752999782562256, 4.629000186920166, 4.625999927520752, 4.585000038146973, 4.576000213623047, 4.599999904632568, 4.611999988555908, 4.64900016784668, 4.839000225067139, 5.692999839782715, 5.673999786376953, 5.4770002365112305, 5.394000053405762, 5.360000133514404, 5.445000171661377, 5.9019999504089355, 11.187000274658203, 11.095000267028809, 11.619999885559082, 11.616999626159668, 11.706999778747559, 11.14900016784668, 11.142999649047852, 11.585000038146973, 11.388999938964844, 5.271999835968018, 5.466000080108643, 6.986000061035156, 6.980000019073486, 6.1539998054504395, 5.803999900817871, 5.7829999923706055, 5.794000148773193, 5.824999809265137, 5.861000061035156, 12.241999626159668, 8.74899959564209, 8.715999603271484, 8.670000076293945, 8.651000022888184, 8.718000411987305, 0.003000000026077032, 0.0, 0.0, 0.0, 11.727999687194824, 11.798999786376953, 12.305999755859375, 12.527000427246094, 11.89799976348877, 11.809000015258789, 9.300000190734863, 9.234999656677246, 9.187999725341797, 12.286999702453613, 9.836999893188477, 9.767000198364258, 9.734000205993652, 5.330999851226807, 5.296999931335449, 5.260000228881836, 5.24399995803833, 5.247000217437744, 5.26200008392334, 5.298999786376953, 5.340000152587891, 9.279000282287598, 9.413000106811523, 9.241000175476074, 8.696000099182129, 8.574000358581543, 8.508999824523926, 8.477999687194824, 8.449999809265137, 8.388999938964844, 8.42300033569336, 8.468000411987305, 8.526000022888184, 8.562000274658203, 8.619999885559082, 8.560999870300293, 8.498000144958496, 0.003000000026077032, 3.4560000896453857, 2.496999979019165, 2.234999895095825, 2.1429998874664307, 2.1519999504089355, 2.118000030517578, 2.11299991607666, 2.1029999256134033, 2.1589999198913574, 2.2290000915527344, 2.2230000495910645, 2.2320001125335693, 2.2179999351501465, 2.2130000591278076, 2.2130000591278076, 2.2109999656677246, 2.2290000915527344, 2.240000009536743, 2.2309999465942383, 2.2290000915527344, 2.2230000495910645, 2.2190001010894775, 2.2090001106262207, 2.2130000591278076, 2.1630001068115234, 2.171999931335449, 2.191999912261963, 2.315999984741211, 2.3010001182556152, 2.305000066757202, 2.3399999141693115, 6.129000186920166, 6.058000087738037, 6.052000045776367, 6.019000053405762, 5.998000144958496, 5.984000205993652, 2.565999984741211, 2.5789999961853027, 2.578000068664551, 2.61899995803833, 2.6610000133514404, 5.7820000648498535, 5.736999988555908, 5.709000110626221, 5.664999961853027, 2.7130000591278076, 2.7090001106262207, 2.687000036239624, 2.681999921798706, 2.6640000343322754, 2.6630001068115234, 2.6570000648498535, 2.6519999504089355, 2.619999885559082, 2.635999917984009, 2.6010000705718994, 2.5869998931884766, 2.625999927520752, 2.680000066757202, 2.740000009536743, 2.7990000247955322, 2.871999979019165, 2.924999952316284, 5.283999919891357, 5.249000072479248, 5.239999771118164, 5.23199987411499, 5.21999979019165, 5.193999767303467, 5.183000087738037, 5.170000076293945, 5.1579999923706055, 5.151000022888184, 5.130000114440918, 5.13100004196167, 5.114999771118164, 5.0980000495910645, 5.085999965667725, 5.078000068664551, 5.0269999504089355, 4.993000030517578, 4.943999767303467, 4.88700008392334, 4.8379998207092285, 4.802999973297119, 4.769000053405762, 4.7170000076293945, 4.665999889373779, 4.625, 4.5920000076293945, 4.589000225067139, 0.781000018119812, 0.7710000276565552, 0.7620000243186951, 0.7570000290870667, 0.7609999775886536, 0.777999997138977, 0.7639999985694885, 0.7770000100135803, 0.7910000085830688, 0.7990000247955322, 0.8040000200271606, 0.7960000038146973, 0.8140000104904175, 0.8069999814033508, 0.8190000057220459, 0.8370000123977661, 0.8429999947547913, 0.8410000205039978, 0.843999981880188, 0.871999979019165, 0.859000027179718, 0.8889999985694885, 0.8809999823570251, 0.890999972820282, 0.8960000276565552, 0.9100000262260437, 0.9229999780654907, 0.921999990940094, 0.9259999990463257, 0.953000009059906, 0.9520000219345093, 0.9319999814033508, 0.925000011920929, 0.9279999732971191, 0.9200000166893005, 0.9169999957084656, 0.9129999876022339, 0.9070000052452087, 0.9129999876022339, 0.921999990940094, 0.8989999890327454, 0.8989999890327454, 0.9070000052452087, 0.8980000019073486, 0.8859999775886536, 0.8880000114440918, 0.8870000243186951, 0.8769999742507935, 0.871999979019165, 0.8859999775886536, 0.875, 0.8740000128746033, 0.8700000047683716, 0.8700000047683716, 0.8679999709129333, 0.8700000047683716, 0.8690000176429749, 0.8650000095367432, 0.8679999709129333, 0.859000027179718, 0.8579999804496765, 0.8579999804496765, 0.8640000224113464, 0.8529999852180481, 0.890999972820282, 0.8920000195503235, 0.8989999890327454, 0.8650000095367432, 0.6029999852180481, 0.4309999942779541, 0.27900001406669617, 0.27799999713897705, 0.2680000066757202, 0.257999986410141, 0.26600000262260437, 0.25699999928474426, 0.2540000081062317, 0.25600001215934753, 0.257999986410141, 0.2460000067949295, 0.23600000143051147, 0.23899999260902405, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2199999988079071, 0.24199999868869781, 0.24699999392032623, 0.2460000067949295, 0.24500000476837158, 0.24899999797344208, 0.2409999966621399, 0.23899999260902405, 0.23399999737739563, 0.23499999940395355, 0.25, 0.2460000067949295, 0.24300000071525574, 0.24199999868869781, 0.23999999463558197, 0.2590000033378601, 0.2590000033378601, 0.257999986410141, 0.257999986410141, 0.26100000739097595, 0.2590000033378601, 0.2680000066757202, 0.25999999046325684, 0.25999999046325684, 0.23999999463558197, 0.22300000488758087, 0.22300000488758087, 0.22200000286102295, 0.20600000023841858, 0.21400000154972076, 0.20100000500679016, 0.19499999284744263, 0.22100000083446503, 0.22499999403953552, 0.21699999272823334, 0.2160000056028366, 0.2150000035762787, 0.20499999821186066, 0.19200000166893005, 0.20800000429153442, 0.20399999618530273, 0.20000000298023224, 0.20100000500679016, 0.2029999941587448, 0.18799999356269836, 0.20200000703334808, 0.20399999618530273, 0.1860000044107437, 0.19699999690055847, 0.1899999976158142, 0.18700000643730164, 0.20800000429153442, 0.19300000369548798, 0.19900000095367432, 0.210999995470047, 0.20399999618530273, 0.20200000703334808, 0.20800000429153442, 0.19499999284744263, 0.2070000022649765, 0.19900000095367432, 0.17599999904632568, 0.19900000095367432, 0.20499999821186066, 0.20499999821186066, 0.19099999964237213, 0.20000000298023224, 0.2029999941587448, 0.1979999989271164, 0.1979999989271164, 0.1860000044107437, 0.1860000044107437, 0.19099999964237213, 0.18199999630451202, 0.19099999964237213, 0.19499999284744263, 0.18000000715255737, 0.19499999284744263, 0.1889999955892563, 0.19499999284744263, 0.1860000044107437, 0.1979999989271164, 0.18799999356269836, 0.19599999487400055, 0.20499999821186066, 0.18799999356269836, 0.19900000095367432, 0.20399999618530273, 0.21199999749660492, 0.2029999941587448, 0.2150000035762787, 0.19900000095367432, 0.20600000023841858, 0.20900000631809235, 0.21299999952316284, 0.23000000417232513, 0.21299999952316284, 0.22300000488758087, 0.23100000619888306, 0.23600000143051147, 0.22699999809265137, 0.2199999988079071, 0.2460000067949295, 0.30300000309944153]
        print(ranges)
        # Compute the number of range measurements and the angle increment
        num_ranges = len(ranges)
        angle_increment = 2 * math.pi / num_ranges

        # Create a list of angles
        angles = [i * angle_increment for i in range(num_ranges)]
        print(angles)
        # Plot the laser scan data
        fig, ax = plt.subplots()
        ax.plot(angles, ranges)
        ax.set_ylim(0, 10)
        plt.show()
